# name: Run unit tests

# on:
#   push:
#     branches: [ main ]
#   pull_request:
#     branches: [ main ]

# jobs:

#   test:
#     name: Test
#     runs-on: ubuntu-latest

#     services:
#       postgres:
#         image: postgres:13-alpine
#         env:
#           POSTGRES_USER: postgres
#           POSTGRES_PASSWORD: password
#           POSTGRES_DB: cryptoapp
#         ports:
#           - 5432:5432
#         options: >-
#           --health-cmd pg_isready
#           --health-interval 10s
#           --health-timeout 5s
#           --health-retries 5
#     steps:

#     - name: Set up Go 1.x
#       uses: actions/setup-go@v2
#       with:
#         go-version: ^1.14
#       id: go

#     - name: Check out code into the Go module directory
#       uses: actions/checkout@v2

#     - name: Install golang-migrate
#       run: |
#         curl -L https://github.com/golang-migrate/migrate/releases/download/v4.14.1/migrate.linux-amd64.tar.gz | tar xvz
#         sudo mv migrate.linux-amd64 /usr/bin/migrate
#         which migrate
#     - name: Run migrations
#       run: make migrate
#       working-directory: account

#     - name: Test adapters
#       run: make test_adapters
#       working-directory: account

#     - name: Test service
#       run: make test_service
#       working-directory: account

#     - name: Test port
#       run: make test_port
#       working-directory: account